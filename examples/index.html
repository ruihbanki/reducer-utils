<!doctype html>
<html>
<body>
<script src="../src/state-proxy.js"></script>
<script src="../src/utils.js"></script>
<script>
let state = {
    raciocinio: {
        elementos: [
            {
                id: 1,
                tipo: 'A',
                children: [
                    {
                        id: 2,
                        tipo: 'B'
                    }
                ]
            },
            {
                id: 2,
                tipo: 'A',
                children: [
                    {
                        id: 4,
                        tipo: 'B'
                    },
                    {
                        id: 5,
                        tipo: 'B'
                    }
                ]
            }
        ],
        elementoSelecionado: {
            id: 1,
            tipo: 'B'
        }        
    }
}

const proxyState = createProxyState(state);
const proxy = proxyState.getProxy();
const raciocinio = proxy.raciocinio;
raciocinio.teste1 = {
    test: 'jjj'   
};
raciocinio.elementoSelecionado = {
    teste: {
        oi: 1
    }
};
raciocinio.elementos.push({
    id: 2,
    tipo: 'A',
    children: [
        {
            id: 4,
            tipo: 'B'
        },
        {
            id: 5,
            tipo: 'B'
        }
    ]
});

const elementos = raciocinio.elementos;
const item0 = elementos[0];
const item1 = elementos[1];
item0.tipo = 'NEW TIPO';
item1.children.splice(0, 1);
const newState = proxyState.getNewState();
logDifferences(state, newState);

</script>
</body>
</html>