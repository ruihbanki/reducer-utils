<!doctype html>
<html>
<script src="../.dist/src/state-proxy.js"></script>
<script src="../.dist/src/utils.js"></script>
<script>

const state = {
    products: [
        {
            id: 1,
            name: 'Nokia',
        },
        {
            id: 2,
            name: 'Iphone',
        },
        {
            id: 3,
            name: 'Galaxy',
        },
    ],
    tree: [
        {
            id: 1,
            name: 'Item 1',
            children: [
                {
                    id: 2,
                    name: 'Item 1.1',
                    children: [
                        {
                            id: 3,
                            name: 'Item 1.1.1',
                        }
                    ]
                },
                {
                    id: 4,
                    name: 'Item 1.2',
                }                
            ]
        },
        {
            id: 5,
            name: 'Item 2',
        },
    ],
    user: {
        name: 'Jonh',
        roles: [
            {
                id: 1,
                name: 'Engineer'
            },
            {
                id: 2,
                name: 'Manager'
            },
        ],
        roleActive: {
            id: 2,
            name: 'Manager' 
        }
    },
};

const stateProxy = createStateProxy(state);
const user0 = stateProxy.user.__object;
stateProxy.user.roleActive.name = 'New name';
const userProxy1 = stateProxy.user;
const user1 = userProxy1.__object;
stateProxy.user.roles[0].name = 'New name 2';
const userProxy2 = stateProxy.user;
const user2 = userProxy2.__object;
const newState = stateProxy.getNewState();

console.log(user1 === user2);

// TODO
// support to all array methods https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/entries
// proxyState be a state and has a getNewState() method
// when set a value that is a proxy is necessary to get the original object OK
// create a method __isProxy() OK
// create a method __getRawData() OK
// 

</script>
<body>

</body>    
</html>